DirectoryIndex index.php

# Block sensitive files (keep OUTSIDE IfModule)
<FilesMatch "^(\.env|.*\.log)$">
    Require all denied
</FilesMatch>

<IfModule mod_rewrite.c>

    RewriteEngine On

    # Don't rewrite real files/folders (let them be served directly)
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]

    # Root (/) serves index.php in public folder (login page)
    RewriteRule ^$ index.php [L]

    # Redirect URLs with .php extension to clean URLs (without .php)
    # Exclude root index.php (needed for logout handling)
    # Exclude api/ directory (API endpoints need .php extension)
    RewriteCond %{THE_REQUEST} \s/+(.+?)\.php(\?[^\s]*)?\s [NC]
    RewriteCond %{REQUEST_URI} !^/index\.php$ [NC]
    RewriteCond %{REQUEST_URI} !^/api/ [NC]
    RewriteRule ^(.*)\.php$ /$1 [R=302,L,QSA]

    # Admin (administration, evaluation & assessments) clean routes
    RewriteRule ^admin/?$ admin/index.php [L]
    RewriteRule ^admin/([^/]+)/?$ admin/index.php?page=$1 [L,QSA]

    # HR (hiring) clean routes
    RewriteRule ^hr/?$ hr/index.php [L]
    RewriteRule ^hr/([^/]+)/?$ hr/index.php?page=$1 [L,QSA]

    # SUPER ADMIN clean routes (folder may be super_admin with underscore)
    RewriteRule ^super-admin/?$ super_admin/index.php [L]
    RewriteRule ^super-admin/([^/]+)/?$ super_admin/index.php?page=$1 [L,QSA]
    RewriteRule ^super_admin/?$ super_admin/index.php [L]
    RewriteRule ^super_admin/([^/]+)/?$ super_admin/index.php?page=$1 [L,QSA]

    # HUMAN RESOURCE clean routes (hr, hr_admin, employee, etc.)
    RewriteRule ^human-resource/?$ human-resource/index.php [L]
    RewriteRule ^human-resource/([^/]+)/?$ human-resource/index.php?page=$1 [L,QSA]

    # Add .php extension internally for clean URLs
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}.php -f
    RewriteRule ^(.*)$ $1.php [L,QSA]

</IfModule>
